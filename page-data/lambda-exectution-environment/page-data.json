{"componentChunkName":"component---src-templates-post-jsx","path":"/lambda-exectution-environment/","result":{"data":{"site":{"siteMetadata":{"title":"Changmin"}},"markdownRemark":{"id":"05a8a703-fcaa-5315-a4ba-514eda2a381e","excerpt":"AWS Lambda의 Execution Environment 이해하기 AWS Lambda 는 서버리스 컴퓨팅의 핵심 서비스로, 서버 관리 없이 코드를 실행할 수 있게 해줍니다. 이러한 편리함 뒤에는 'Execution Environment(실행 환경)' 라는 개념이 중요한 역할을 한다고 하는데요. 이번 글에서는 AWS Lambda의 Execution En…","html":"<h1 id=\"AWS-Lambda의-Execution-Environment-이해하기\" style=\"position:relative;\"><a href=\"#AWS-Lambda%EC%9D%98-Execution-Environment-%EC%9D%B4%ED%95%B4%ED%95%98%EA%B8%B0\" aria-label=\"AWS Lambda의 Execution Environment 이해하기 permalink\" class=\"heading-anchor before\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 24 24\"><path d=\"M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z\"/></svg></a>AWS Lambda의 Execution Environment 이해하기</h1>\n<p><strong>AWS Lambda</strong> 는 서버리스 컴퓨팅의 핵심 서비스로, 서버 관리 없이 코드를 실행할 수 있게 해줍니다. 이러한 편리함 뒤에는 <strong>'Execution Environment(실행 환경)'</strong> 라는 개념이 중요한 역할을 한다고 하는데요. 이번 글에서는 AWS Lambda의 Execution Environment가 무엇인지, 어떻게 동작하는지, 그리고 이를 최적화하여 활용하는 방법에 대해 알아보겠습니다.</p>\n<h2 id=\"Execution-Environment\" style=\"position:relative;\"><a href=\"#Execution-Environment\" aria-label=\"Execution Environment permalink\" class=\"heading-anchor before\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 24 24\"><path d=\"M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z\"/></svg></a>Execution Environment</h2>\n<p>Execution Environment는 Lambda 함수가 실행되는 격리된 환경으로, 함수 실행에 필요한 모든 리소스를 관리합니다. 각 Execution Environment는 다음과 같은 구성 요소를 포함합니다.</p>\n<ul>\n<li><strong>메모리(Memory)</strong> : 함수에 할당된 메모리 용량으로, 함수 생성 시 설정함</li>\n<li><strong>CPU</strong> : 할당된 메모리에 비례하여 CPU 성능이 결정됨</li>\n<li><strong>임시 스토리지(Ephemeral Storage)</strong> : 함수 실행 중 <code class=\"language-text\">/tmp</code> 디렉터리를 통해 최대 512MB의 임시 스토리지를 제공함</li>\n<li><strong>타임아웃(Timeout)</strong> : 함수의 최대 실행 시간을 설정하며, 기본값은 3초, 최대 15분까지 가능함</li>\n<li><strong>핸들러(Handler)</strong> : 함수의 진입점으로, 이벤트를 처리하는 메인 메서드</li>\n<li><strong>프로비저닝된 동시성(Provisioned Concurrency)</strong> : 함수의 초기화를 미리 수행하여 콜드 스타트 지연을 최소화하는 옵션</li>\n<li><strong>환경 변수(Environment Variables)</strong> : 함수 실행 시 필요한 설정값들을 저장함</li>\n</ul>\n<p>각 함수는 고유한 Execution Environment에서 실행되며, 함수 간에 이 환경이 공유되지 않습니다. 그러나 동일한 함수가 반복 호출될 경우, 동일한 Execution Environment가 재사용될 수 있습니다. 이러한 재사용 특성은 함수의 성능 최적화에 중요한 영향을 미칩니다.</p>\n<h2 id=\"Execution-Environment의-생명주기\" style=\"position:relative;\"><a href=\"#Execution-Environment%EC%9D%98-%EC%83%9D%EB%AA%85%EC%A3%BC%EA%B8%B0\" aria-label=\"Execution Environment의 생명주기 permalink\" class=\"heading-anchor before\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 24 24\"><path d=\"M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z\"/></svg></a>Execution Environment의 생명주기</h2>\n<p>Execution Environment는 함수 실행 시 다음과 같은 단계를 거칩니다.</p>\n<p><figure class='gatsby-resp-image-figure' style='margin-bottom: 16px;'>\n    <span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; '>\n      <a class='gatsby-resp-image-link' href='/static/40906fec3ee86bf718cef36654db3be7/42cbc/aws-lambda.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 18.823529411764707%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAIAAAABPYjBAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAyUlEQVR42hWOuU4DQRBE9///hQCJwE4QAYlFgpAwh8CYU3vPbHdvX97ZYSxVUE/1gqpqhBaojzrBNGMjPKkE5V65UwUVOJczjuo+kRWzRWoIgbm6OuxvPurbe/48Po3HC4d9pjtuttZtsrxmedZuUzDjLuf0+E7Xu2b7drh8eWhnqkbnINYFY6HF2rTMq0eMP4J/a5pLGH4xficPOa8kqe7pqx86RnGvTuZmBghiLpbETmLLEDCiqC8lAWSIVCYtZnkO0zAEEWXRfx534Gm0wrmaAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='Lambda 실행 환경 수명 주기' title='' src='/static/40906fec3ee86bf718cef36654db3be7/ca1dc/aws-lambda.png' srcset='/static/40906fec3ee86bf718cef36654db3be7/e7570/aws-lambda.png 170w,\n/static/40906fec3ee86bf718cef36654db3be7/f46e7/aws-lambda.png 340w,\n/static/40906fec3ee86bf718cef36654db3be7/ca1dc/aws-lambda.png 680w,\n/static/40906fec3ee86bf718cef36654db3be7/02d09/aws-lambda.png 1020w,\n/static/40906fec3ee86bf718cef36654db3be7/9d567/aws-lambda.png 1360w,\n/static/40906fec3ee86bf718cef36654db3be7/42cbc/aws-lambda.png 1600w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span>\n    <figcaption class='gatsby-resp-image-figcaption'>Lambda 실행 환경 수명 주기</figcaption>\n  </figure></p>\n<ol>\n<li>\n<p><strong>초기화 단계(Init)</strong></p>\n<ul>\n<li><strong>Extension Init</strong> : Lambda에 부가 기능을 추가하는 확장 프로그램을 초기화합니다.</li>\n<li><strong>Runtime Init</strong> : 선택한 언어의 런타임을 초기화하여 코드 실행을 준비합니다.</li>\n<li><strong>Function Init</strong> : 함수의 정적 코드를 실행하여 핸들러를 준비합니다.</li>\n</ul>\n<p>이 단계는 함수의 첫 호출 시 발생하며, 최대 10초의 지연이 생길 수 있습니다. 이러한 지연을 **'콜드 스타트(Cold Start)'**라고 합니다. <strong>프로비저닝된 동시성</strong>을 사용하면 이 지연을 최소화할 수 있습니다.</p>\n</li>\n<li>\n<p><strong>호출 단계(Invoke)</strong>\n실제 함수의 비즈니스 로직이 실행되는 단계로, 설정된 타임아웃 내에 완료되어야 합니다.</p>\n</li>\n<li>\n<p><strong>종료 단계(Shutdown)</strong>\n함수 실행이 완료되면 런타임과 확장 프로그램을 종료하고, Execution Environment를 정리합니다. 이 단계는 최대 2초가 주어지며, 이후 강제로 종료됩니다.</p>\n</li>\n</ol>\n<h2 id=\"Execution-Environment의-재사용과-최적화\" style=\"position:relative;\"><a href=\"#Execution-Environment%EC%9D%98-%EC%9E%AC%EC%82%AC%EC%9A%A9%EA%B3%BC-%EC%B5%9C%EC%A0%81%ED%99%94\" aria-label=\"Execution Environment의 재사용과 최적화 permalink\" class=\"heading-anchor before\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 24 24\"><path d=\"M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z\"/></svg></a>Execution Environment의 재사용과 최적화</h2>\n<p>Lambda는 성능 최적화를 위해 종료 단계 이후에도 Execution Environment를 일정 시간 유지합니다. 이로 인해 다음과 같은 이점이 있는데요,</p>\n<ul>\n<li><strong>전역 변수의 유지</strong></li>\n</ul>\n<p>핸들러 외부에서 초기화된 변수나 객체는 Execution Environment가 재사용될 때 그대로 유지됩니다. 이 환경이 유지되어 전역변수로 만들어진 객체들의 참조가 지속적으로 남아있는 것이죠. </br></p>\n<p>예를 들어, 데이터베이스 연결을 전역 변수로 선언하면 첫 호출 이후 재사용되어 성능이 향상됩니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// 초기화 코드</span>\n<span class=\"token keyword\">let</span> dbConnection\n\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>dbConnection<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  dbConnection <span class=\"token operator\">=</span> <span class=\"token function\">initializeDBConnection</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\nexports<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">handler</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token parameter\">event</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// dbConnection을 사용한 로직</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ul>\n<li><strong>임시 스토리지의 재사용</strong></li>\n</ul>\n<p><code>/tmp</code> 디렉터리에 저장된 파일은 Execution Environment가 유지되는 한 다음 호출 시에도 접근 가능합니다. 이를 활용하여 캐시나 임시 데이터를 저장할 수 있습니다.</p>\n<ul>\n<li><strong>백그라운드 프로세스의 지속</strong></li>\n</ul>\n<p>함수 종료 시 완료되지 않은 백그라운드 작업이나 콜백 함수는 Execution Environment 재사용 시 다시 실행될 수 있는데요, NodeJS 기반에서 Promise가 다음 함수에서 resolve 되어버리는 문제가 발생할 수 있습니다.</p>\n<h2 id=\"최적화-사례\" style=\"position:relative;\"><a href=\"#%EC%B5%9C%EC%A0%81%ED%99%94-%EC%82%AC%EB%A1%80\" aria-label=\"최적화 사례 permalink\" class=\"heading-anchor before\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 24 24\"><path d=\"M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z\"/></svg></a>최적화 사례</h2>\n<ul>\n<li><strong>전역 변수 활용</strong></li>\n</ul>\n<p>데이터베이스 연결이나 외부 API 클라이언트 등 재사용 가능한 객체는 전역 변수로 선언하여 초기화 비용을 절감</p>\n<ul>\n<li><strong>임시 스토리지 활용</strong></li>\n</ul>\n<p>반복적으로 필요한 데이터는 <code>/tmp</code> 디렉터리에 저장하여 I/O 비용을 최소화</p>\n<ul>\n<li><strong>프로비저닝된 동시성 사용</strong></li>\n</ul>\n<p>콜드 스타트 지연이 허용되지 않는 경우, 프로비저닝된 동시성을 설정하여 항상 준비된 Execution Environment를 유지시킬 수 있음</p>\n<h2 id=\"마무리\" style=\"position:relative;\"><a href=\"#%EB%A7%88%EB%AC%B4%EB%A6%AC\" aria-label=\"마무리 permalink\" class=\"heading-anchor before\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 24 24\"><path d=\"M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z\"/></svg></a>마무리</h2>\n<p>AWS Lambda의 Execution Environment는 함수의 성능과 효율성에 직접적인 영향을 미칩니다. 그 동작 원리와 생명주기를 깊이 이해하고 적절히 활용하면 서버리스 애플리케이션의 성능을 극대화할 수 있습니다. 앞으로 Lambda Extensions나 프로비저닝된 동시성 등 고급 주제에 대해서도 지속적으로 학습하여 더욱 최적화된 서버리스 아키텍처를 구축해보려고 합니다.</p>\n<p>감사합니다.</p>","frontmatter":{"title":"AWS Lambda의 Execution Environment 이해하기","date":"January 19, 2025","update":null,"tags":["aws-lambda","serverless"],"series":null},"fields":{"slug":"/lambda-exectution-environment/","readingTime":{"minutes":7.15}}},"seriesList":{"edges":[{"node":{"id":"53222982-f6a0-59ed-85e0-e19906070f62","fields":{"slug":"/koyeb-free-tier/"},"frontmatter":{"title":"Koyeb에 NodeJS(Express) 서버 배포하기"}}},{"node":{"id":"05a8a703-fcaa-5315-a4ba-514eda2a381e","fields":{"slug":"/lambda-exectution-environment/"},"frontmatter":{"title":"AWS Lambda의 Execution Environment 이해하기"}}},{"node":{"id":"06c2dd6e-649c-5521-9e05-baf0cc44800d","fields":{"slug":"/serverless_architecture/"},"frontmatter":{"title":"서버리스 아키텍처의 진짜 의미와 오해"}}}]},"previous":{"fields":{"slug":"/gachdong-01/"},"frontmatter":{"title":"가천대학교 동아리 모집 관리 서비스"}},"next":{"fields":{"slug":"/nestjs/"},"frontmatter":{"title":"NestJS Deep Dive"}}},"pageContext":{"id":"05a8a703-fcaa-5315-a4ba-514eda2a381e","series":null,"previousPostId":"40bae031-3934-5f0a-8462-63e617504b12","nextPostId":"59e80cb2-caf7-518e-b3d8-1b7d7c2a3fc3"}},"staticQueryHashes":[],"slicesMap":{}}