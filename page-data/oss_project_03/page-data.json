{"componentChunkName":"component---src-templates-post-jsx","path":"/oss_project_03/","result":{"data":{"site":{"siteMetadata":{"title":"Changmin"}},"markdownRemark":{"id":"f96e7220-8f62-5810-b9cc-280bc2176c6b","excerpt":"NestJS @nestjs/microservices should handle RabbitMQ bindings and auto-generated queues 진행 이슈 link PR link 이슈 내용 nestjs 에서 제공하는 microservices 에서 RabbitMQ 를 사용할 경우, RMQ의 binding 과 auto-generated queues…","html":"<h3 id=\"NestJS-nestjsmicroservices-should-handle-RabbitMQ-bindings-and-auto-generated-queues\" style=\"position:relative;\"><a href=\"#NestJS-nestjsmicroservices-should-handle-RabbitMQ-bindings-and-auto-generated-queues\" aria-label=\"NestJS nestjsmicroservices should handle RabbitMQ bindings and auto generated queues permalink\" class=\"heading-anchor before\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 24 24\"><path d=\"M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z\"/></svg></a>[NestJS] @nestjs/microservices should handle RabbitMQ bindings and auto-generated queues</h3>\n<ul>\n<li><a href=\"https://github.com/nestjs/nest/issues/13931\">진행 이슈 link</a></li>\n<li><a href=\"https://github.com/nestjs/nest/pull/14129\">PR link</a></li>\n</ul>\n<h2 id=\"이슈-내용\" style=\"position:relative;\"><a href=\"#%EC%9D%B4%EC%8A%88-%EB%82%B4%EC%9A%A9\" aria-label=\"이슈 내용 permalink\" class=\"heading-anchor before\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 24 24\"><path d=\"M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z\"/></svg></a>이슈 내용</h2>\n<p>nestjs 에서 제공하는 microservices 에서 RabbitMQ 를 사용할 경우, RMQ의 binding 과 auto-generated queues 가 동작하지 않는 이슈</p>\n<p><figure class='gatsby-resp-image-figure' style='margin-bottom: 16px;'>\n    <span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; '>\n      <a class='gatsby-resp-image-link' href='/static/cd4ce777d653059301717e953592d660/134d7/image.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 112.94117647058823%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAXCAYAAAALHW+jAAAACXBIWXMAABYlAAAWJQFJUiTwAAAC8ElEQVR42o1V2XLaQBDkJZXYsQ3oQveFTiRxCGNsV1xJ/JD//6PJ9IhVHMo4eeia3UXb23My+fX6g9ykorjoyIlKRkF2mJNmRzSzQkYwAmeGm3yAlCaa6VKUt9TsjlQ0O7HV+p7y1U72q82DoOXzKG/oZm7Trea8D92hyfXUIsMOKVzWFGUrivlSfLI6n08Nl2amJ7jVbLq6M5h0cRGTrzOL3ChnRVuquj2VbS9YbQ6Ulp2oXNYb+V3W1VqIcQ8EsADOAFZoirqufxR3u/2ToOV92fXiKqAewXf1ei/kOKs5PLB+UtIULoNddyIKs0ZiGcJltn5aUZDWlLKiuGgpYbXBckUeJ9CNC/LiIYHDviQTSXFimkD21PBptX2k++dX2hxexLb9M5Nt+QEQNbL2kloyqaA7g9XsmEkrqZKB0PRZxVqI8mbPalsBCHQnEeASLpve8iLmi3AgRI3hcv/4neP4JK+9JbD8TPARmellUqejQhDun35SvTmK2n8TXCLkpGCRrXoq2nuxiNkiyEdl/0eei1eicA6X2U2bSZA9nX9APHR+aEB8yuIJp7UpyUGMY9IW3KrsqZTN3PKHeuMay7m+2t0DNdsHqTtYtCLqLOBSGmwp1uPySbikLC+h66nxp1NAWLT9AC5m9HG9PvB+6OeMOwUEAJoAxLDYqxZVnSOdgldUN6D98BFabMZ9/OlqSle3+thi6qLC+V4Umm5MBXqZXYMi9LYdLMVCBVw6v3hxOEgd8iSBSgyA7DQIoBZry08kJG8VjuTvKB6nDZoc7oJExQ0xTfmhqhviiyTBmzseAhhrCpgyfxEiqMhmf3yRaaIyjjUmT9YceFbWEluVGGUxdA0eLiCT8QXChZ/KcMUHcB1rXAAJJpC3bMkJh5jC/c83Gn3hRGHYKguAa8zympXAZak7tioEcHN//Cbn+AbZBzFqUNUiADFInii0w0zcQTwQn/MYIWnqHGttEYhSQK3V38XYeh/V2Nvz82yfZ/43PGttKKmEPPsAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='이슈 내용' title='' src='/static/cd4ce777d653059301717e953592d660/ca1dc/image.png' srcset='/static/cd4ce777d653059301717e953592d660/e7570/image.png 170w,\n/static/cd4ce777d653059301717e953592d660/f46e7/image.png 340w,\n/static/cd4ce777d653059301717e953592d660/ca1dc/image.png 680w,\n/static/cd4ce777d653059301717e953592d660/02d09/image.png 1020w,\n/static/cd4ce777d653059301717e953592d660/9d567/image.png 1360w,\n/static/cd4ce777d653059301717e953592d660/134d7/image.png 1628w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span>\n    <figcaption class='gatsby-resp-image-figcaption'>이슈 내용</figcaption>\n  </figure></p>\n<h2 id=\"해결-과정\" style=\"position:relative;\"><a href=\"#%ED%95%B4%EA%B2%B0-%EA%B3%BC%EC%A0%95\" aria-label=\"해결 과정 permalink\" class=\"heading-anchor before\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 24 24\"><path d=\"M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z\"/></svg></a>해결 과정</h2>\n<p>우선 제안한 해결 방안에 대한 가이드는 두 개로 다음과 같았습니다.</p>\n<ol>\n<li>The queues should be named in the expected format</li>\n</ol>\n<p>=> queue들은 예상된 형태로 이름이 부여되어야 함</p>\n<h3 id=\"디버깅-포인트\" style=\"position:relative;\"><a href=\"#%EB%94%94%EB%B2%84%EA%B9%85-%ED%8F%AC%EC%9D%B8%ED%8A%B8\" aria-label=\"디버깅 포인트 permalink\" class=\"heading-anchor before\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 24 24\"><path d=\"M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z\"/></svg></a>디버깅 포인트</h3>\n<blockquote>\n<p>queue의 이름이 ''로 지정될 때, RabbitMQ 의 옵션처럼 'amq.gen-asdnfks...' 형태가 아닌 'default'로 부여되는지를 파악</p>\n</blockquote>\n<p>우선 packages/microservices/constants.ts 에서 RQM<em>DEFAULT</em>QUEUE이 default로 지정되어 있었습니다. 그리고 queue 옵션이 ''로 넘어오면, queue에 RQM<em>DEFAULT</em>QUEUE이 할당되어 실제 queue name은 default로 할당되는 문제가 발생했습니다.</p>\n<p>단순히, packages/microservices/constants.ts 의 <code>export const RQM<em>DEFAULT</em>QUEUE = 'default';</code> 를 <code>export const RQM<em>DEFAULT</em>QUEUE = '';</code> 로 수정하니, 문제가 해결되었습니다.</p>\n<ol start=\"2\">\n<li>The binding should automatically happen</li>\n</ol>\n<p>=> binding은 자동적으로 진행되어야 함</p>\n<h3 id=\"디버깅-포인트-1\" style=\"position:relative;\"><a href=\"#%EB%94%94%EB%B2%84%EA%B9%85-%ED%8F%AC%EC%9D%B8%ED%8A%B8-1\" aria-label=\"디버깅 포인트 1 permalink\" class=\"heading-anchor before\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 24 24\"><path d=\"M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z\"/></svg></a>디버깅 포인트</h3>\n<blockquote>\n<p>binding 에 관련된 option들을 파악</p>\n</blockquote>\n<p>우선 binding 옵션은 exchange와 routingKey 인데, 실제 NestJS microservices의 rabbitMQ option에는 해당 값들이 존재하지 않았습니다. 그래서, RMQOption interface에 해당 값들을 optional로 추가해주었습니다.</p>\n<p>AS-IS</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"> isGlobalPrefetchCount<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token builtin\">boolean</span><span class=\"token punctuation\">;</span>\n    queueOptions<span class=\"token operator\">?</span><span class=\"token operator\">:</span> AmqplibQueueOptions<span class=\"token punctuation\">;</span>\n    socketOptions<span class=\"token operator\">?</span><span class=\"token operator\">:</span> AmqpConnectionManagerSocketOptions<span class=\"token punctuation\">;</span>\n    noAck<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token builtin\">boolean</span><span class=\"token punctuation\">;</span>\n    consumerTag<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n    serializer<span class=\"token operator\">?</span><span class=\"token operator\">:</span> Serializer<span class=\"token punctuation\">;</span></code></pre></div>\n<p>TO-BE</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"> isGlobalPrefetchCount<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token builtin\">boolean</span><span class=\"token punctuation\">;</span>\n    queueOptions<span class=\"token operator\">?</span><span class=\"token operator\">:</span> AmqplibQueueOptions<span class=\"token punctuation\">;</span>\n    socketOptions<span class=\"token operator\">?</span><span class=\"token operator\">:</span> AmqpConnectionManagerSocketOptions<span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">// 해당 binding option을 optional로 추가</span>\n    exchange<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n    routingKey<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n    noAck<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token builtin\">boolean</span><span class=\"token punctuation\">;</span>\n    consumerTag<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n    serializer<span class=\"token operator\">?</span><span class=\"token operator\">:</span> Serializer<span class=\"token punctuation\">;</span></code></pre></div>\n<p>그 다음, 사용자가 지정한 binding option이 실제로 server에 적용되는 조건문이 존재하지 않았습니다. 그래서, client-rmq.ts 와 server-rmq.ts 에 해당 설정을 binding 해주는 로직을 추가했습니다.</p>\n<p>client-rmq.ts</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>noAssert<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">await</span> channel<span class=\"token punctuation\">.</span><span class=\"token function\">assertQueue</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>queue<span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>queueOptions<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// 기존에 존재하지 않았던 로직</span>\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>options<span class=\"token punctuation\">.</span>exchange <span class=\"token operator\">&amp;&amp;</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>options<span class=\"token punctuation\">.</span>routingKey<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">await</span> channel<span class=\"token punctuation\">.</span><span class=\"token function\">bindQueue</span><span class=\"token punctuation\">(</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>queue<span class=\"token punctuation\">,</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>options<span class=\"token punctuation\">.</span>exchange<span class=\"token punctuation\">,</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>options<span class=\"token punctuation\">.</span>routingKey\n  <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">await</span> channel<span class=\"token punctuation\">.</span><span class=\"token function\">prefetch</span><span class=\"token punctuation\">(</span>prefetchCount<span class=\"token punctuation\">,</span> isGlobalPrefetchCount<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">await</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">consumeChannel</span><span class=\"token punctuation\">(</span>channel<span class=\"token punctuation\">)</span>\n<span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>server-rmq.ts</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>noAssert<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">await</span> channel<span class=\"token punctuation\">.</span><span class=\"token function\">assertQueue</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>queue<span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>queueOptions<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// 기존에 존재하지 않았던 로직</span>\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>options<span class=\"token punctuation\">.</span>exchange <span class=\"token operator\">&amp;&amp;</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>options<span class=\"token punctuation\">.</span>routingKey<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">await</span> channel<span class=\"token punctuation\">.</span><span class=\"token function\">assertExchange</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>options<span class=\"token punctuation\">.</span>exchange<span class=\"token punctuation\">,</span> <span class=\"token string\">'topic'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n    durable<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">await</span> channel<span class=\"token punctuation\">.</span><span class=\"token function\">bindQueue</span><span class=\"token punctuation\">(</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>queue<span class=\"token punctuation\">,</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>options<span class=\"token punctuation\">.</span>exchange<span class=\"token punctuation\">,</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>options<span class=\"token punctuation\">.</span>routingKey<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">await</span> channel<span class=\"token punctuation\">.</span><span class=\"token function\">prefetch</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>prefetchCount<span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>isGlobalPrefetchCount<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nchannel<span class=\"token punctuation\">.</span><span class=\"token function\">consume</span><span class=\"token punctuation\">(</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>queue<span class=\"token punctuation\">,</span></code></pre></div>\n<h2 id=\"결과\" style=\"position:relative;\"><a href=\"#%EA%B2%B0%EA%B3%BC\" aria-label=\"결과 permalink\" class=\"heading-anchor before\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 24 24\"><path d=\"M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z\"/></svg></a>결과</h2>\n<p>그 결과로 실제 local에서 RabbitMQ와 nestjs microservice 설정을 진행해보았는데, 제기되었던 이슈의 문제를 말끔하게 해결할 수 있게 되었습니다.</p>\n<p><figure class='gatsby-resp-image-figure' style='margin-bottom: 16px;'>\n    <span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; '>\n      <a class='gatsby-resp-image-link' href='/static/fc2fcd382816d4102877cccd1926a734/64756/image-1.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 128.23529411764707%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAaCAYAAAC3g3x9AAAACXBIWXMAABYlAAAWJQFJUiTwAAAEJUlEQVR42p2Sa0+bZRjHa5zRDd2xLQX6tH0O7fOUUnqkUE66DcRsn2IvTPwcJsbTnFliTExMfGEGyRKFjbApFJgm6hsQKIkEaIFgWQsUKBAGBcrf676hMLNSD3fyz3Uff/d10hnKBEiqE6JdhU1RUWGxQbBJsIgyygUbzFYZglWC+WifyVQhwFQu4KK+DCUXS/H6pRPpKgQrvD4PGlra8FbLVdy4eRMtrS0INzUh/GY9rrc1ItxYC4fdAVVVUVlZCVmWIUkS9KUVBDT+HVhutsBmtcBV2wRvjQ9tN95BfX0QTn8QoeYAmq77EKhzw1WtQiSIQA7YbDYCirhSWl4YqNCPLmc1vK4APFV+VHrDCNQEyRs7FLsGB6XEoWpQHQ44VRkygRn8VCC7oNLD5qarqK1vRKguhJZrzagJ1UJR3dBcftg1DzzuKoS8KuwEFsViQFmCRKpraIDPV03eiqhyU76qNGiqnUK08rRYrVYIVJyiIbOiqKoDZrMZoXCYoPVwulQKVYJdFSErLG8CP39eAumyoVCVWQ4Vhf/q9wdwrbUVAR8VhVrIYrGSVzYKT3xBxYuiyBAJGAjWIBQIwu3UeAr4Y0n8b8ATD61UhBry8G14fG5UugkqyQVh/whkjSorDmjaYQXZB4r9sHn/F1Ch8FSXG9WBEKo8fjg1b1FYcSBV2eFQqLIeuD1UDE3hPcaAxcRaTW+q4JA3Lpu4OPDSFSNKS00wmcpgNBqh1xtgMOjJniJD/o4Rr5ZcgO5MCXSvlODl184fAt//4CP0RSK4196BnkeP0dsXoXU/+gcGMTBIGjjS4BO+19vbx88jfWR/7MXjRz9g4MlPuH3nLs5dMEDX+bAH2Z0dTExMIJl8irm5OWQyGezt7WH72TNks1ns0Pn29jafLywscJvMbCKxvonljQzW19cwSNCz5wl4/7tOHORyBEticXER4+PjGB4eRjQaxejoGK2jGBkZwdDQEN+bmZkhaAKjiUX8PJvC7/NzWFldQnvHfV4g3fdd3WCDAVdWVjh0a2sL/3bs7+9zG4kM4KUz56D76utvEI/P4Jdff8PoWBR/UOgxWjNNx+KIk0fxo3V8ZvbQ5s9JU7EY/kwkKPf9CNY1Q/ftvQ7u3RjBYvE4lpeXsbi0hCWy6XQaqVQKKfKaKfk0iSU6S6dX6F76WMlkCgcHB+h60A3dg+6eY9fZJhurq6tI0K8MPjU1hRh5MT8/z/dYwbLZHezu7r4QNmMdA3epqnngxsYGZmdnuXcMwnLLPmGQyclJtLe3Y3p6mt9lbwoC85v5OWsNZnPUAflHzLL9zc1Nbgt62Nn1kC/ygBPluGX9uLaW4flkURx/kMsd383DGaugh88PBsw3N5sXax3u4a1338PdL77Eh598ho9vf366Pr1zqAJn7C1jMNZflXbTQPGu2iwAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='실제 테스트 결과' title='' src='/static/fc2fcd382816d4102877cccd1926a734/ca1dc/image-1.png' srcset='/static/fc2fcd382816d4102877cccd1926a734/e7570/image-1.png 170w,\n/static/fc2fcd382816d4102877cccd1926a734/f46e7/image-1.png 340w,\n/static/fc2fcd382816d4102877cccd1926a734/ca1dc/image-1.png 680w,\n/static/fc2fcd382816d4102877cccd1926a734/02d09/image-1.png 1020w,\n/static/fc2fcd382816d4102877cccd1926a734/64756/image-1.png 1200w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span>\n    <figcaption class='gatsby-resp-image-figcaption'>실제 테스트 결과</figcaption>\n  </figure></p>\n<p>queue를 ''으로 설정했을 때, Name이 'default'가 아닌 'amq.gen-...'으로 지정되었고, Binding의 option 또한 내가 지정한대로 잘 적용된 것을 확인할 수 있습니다.</p>\n<p>아직, merge되진 않았지만 다른 분께서 좋은 제안인 것 같다는 코멘트와 메인테이너 분께서 해당 이슈를 completed로 변경하신 뒤 milestone을 적용해주신 것으로 보아, 다음 milestone까지 해당 PR에서 추가 피드백이나 논의가 진행될 것으로 예상됩니다.</p>","frontmatter":{"title":"[NestJS] @nestjs/microservices should handle RabbitMQ bindings and auto-generated queues","date":"November 16, 2024","update":"November 16, 2024","tags":["오픈소스","NestJS"],"series":"Open Source"},"fields":{"slug":"/oss_project_03/","readingTime":{"minutes":3.66}}},"seriesList":{"edges":[{"node":{"id":"b6550bf9-c830-5ce7-baf5-17d7fa28eca3","fields":{"slug":"/opensource-toss-aop/"},"frontmatter":{"title":"Toss AOP 라이브러리 한글 문서 번역 기여"}}},{"node":{"id":"e6e35a87-6eea-514d-919b-700f01db42f0","fields":{"slug":"/oss_project_01/"},"frontmatter":{"title":"오픈 소스 기여: 작은 코드의 큰 가치"}}},{"node":{"id":"3b892aed-097e-5502-8614-cad7a082629f","fields":{"slug":"/oss_project_02/"},"frontmatter":{"title":"[NestJS] type narrowing context parameter on createParamDecorator's callback"}}},{"node":{"id":"f96e7220-8f62-5810-b9cc-280bc2176c6b","fields":{"slug":"/oss_project_03/"},"frontmatter":{"title":"[NestJS] @nestjs/microservices should handle RabbitMQ bindings and auto-generated queues"}}}]},"previous":{"fields":{"slug":"/oss_project_02/"},"frontmatter":{"title":"[NestJS] type narrowing context parameter on createParamDecorator's callback"}},"next":null},"pageContext":{"id":"f96e7220-8f62-5810-b9cc-280bc2176c6b","series":"Open Source","previousPostId":"3b892aed-097e-5502-8614-cad7a082629f","nextPostId":null}},"staticQueryHashes":[],"slicesMap":{}}