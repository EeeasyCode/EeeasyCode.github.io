---
title: "[TIL] 글로벌 물류 네트워크 백엔드 서비스 설계"
description: "백엔드 면접 예상 질문"
date: 2024-11-27
update: 2024-11-27
tags:
  - 아키텍처 설계
series: "TIL"
---

글로벌 물류 네트워크 백엔드 서비스 설계

오늘은 일일 100만 건의 배송 데이터를 처리하고, 실시간 배송 상태를 고객에게 제공해야 하는 글로벌 물류 네트워크 관리 서비스를 설계할 때 고려해야 할 사항들을 설계해보았습니다. 특히 평균 TPS 70, 최대 TPS 300을 처리해야 하는 성능 요구사항이 존재합니다.

## 서비스 설계의 핵심 고려사항

- 확장성(Scalability): 수평 확장을 통해 부하에 따라 시스템을 유연하게 확장
- 고가용성(High Availability): 장애 발생 시에도 서비스 중단 없이 운영될 수 있도록 이중화
- 낮은 지연 시간: 실시간 배송 상태 제공을 위해 응답 속도 최적화
- 데이터 일관성: 정확한 배송 정보를 제공하기 위한 데이터 일관성 유지
- 보안: 고객 정보와 배송 데이터 보호를 위한 강화된 보안 조치

## 데이터베이스 구조 및 기술 선택

NoSQL 데이터베이스 채택 -> MongoDB나 Cassandra와 같은 NoSQL DB를 사용하여 수평 확장성과 높은 쓰기/읽기 처리량 확보

- 데이터 모델링 최적화

  - 비정규화를 통해 읽기 성능 향상
  - 복합 인덱스와 지리 공간 인덱스로 빠른 데이터 조회

- 샤딩(Sharding)과 파티셔닝(Partitioning)
  - 샤딩 키로 배송 ID나 지역 정보를 사용하여 데이터 분산
  - 파티셔닝을 통해 오래된 데이터와 최신 데이터를 분리 관리

## 실시간 데이터 처리 아키텍처

- 이벤트 드리븐 아키텍처를 도입하여 비동기식 데이터 처리
- Apache Kafka를 사용한 고성능 메시징 시스템 구축

- 실시간 스트리밍 처리

  - Apache Flink나 Apache Spark Streaming을 활용하여 실시간 데이터 처리 및 분석

- 데이터 파이프라인 최적화

  - 백프레셔 관리, 체크포인팅, 효율적인 직렬화로 안정성과 성능 향상

## 애플리케이션 성능 최적화

- 비동기 논블로킹 I/O

  - Spring WebFlux를 사용하여 높은 동시성 요청 처리
  - NodeJS를 사용하여 싱글 스레드 논블로킹 I/O 처리

- 효율적인 쓰레드 및 연결 관리

  - ThreadPoolExecutor와 HikariCP로 자원 최적화

- 캐싱 전략 적용

  - Redis를 활용하여 자주 조회되는 데이터의 응답 시간 단축

- JVM 튜닝
  - 가비지 컬렉션 및 힙 메모리 설정 최적화로 지연 최소화

## Java와 Node.js의 비교 및 선택

### Java

- 장점: 멀티쓰레딩 지원, 높은 성능, 풍부한 엔터프라이즈 솔루션 경험.
- 적합성: 고성능과 안정성이 필요한 대규모 시스템에 적합.

### Node.js

- 장점: 비동기 I/O 모델, 빠른 개발 속도, 동일한 언어(JavaScript) 사용.
- 적합성: 경량 애플리케이션이나 실시간 웹 서비스에 적합.

### 결론

본 서비스는 높은 성능과 안정성이 요구되므로 Java를 사용하는 것이 더 적합.

## 모니터링 및 테스트

- 부하 테스트

  - Apache JMeter나 Gatling을 사용하여 TPS 목표치 검증

- 모니터링 시스템 구축

  - Prometheus와 Grafana로 시스템 메트릭 수집 및 시각화
  - ELK Stack으로 로그 수집 및 분석

## 추가 고려사항

- 데이터 일관성 모델 선택

  - **최종 일관성(Eventual Consistency)**을 채택하여 성능과 일관성의 균형 유지

- 보안 강화

  - OAuth 2.0이나 JWT를 사용한 인증 및 권한 부여
  - SSL/TLS 암호화로 데이터 전송 보안 강화

- 자동화 및 배포

  - Docker와 Kubernetes로 컨테이너화 및 오케스트레이션
  - CI/CD 파이프라인을 구축하여 지속적 통합 및 배포 자동화

- 글로벌 서비스
  - 글로벌 고객을 위한 다중 리전 or CDN 도입

## 결론

결론적으로, 글로벌 물류 네트워크 서비스를 설계할 때는 확장성과 실시간 처리 능력을 갖춘 아키텍처를 구축하는 것이 핵심입니다. 적절한 기술 스택과 성능 최적화를 통해 높은 TPS 요구사항을 충족하고, 고객에게 신뢰성 있는 실시간 배송 정보를 제공할 수 있습니다.
